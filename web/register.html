<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>登录</title>
<meta name="keywords" content="steam-distiller">
<meta name="description" content="steam-distiller">
<link rel="stylesheet" href="static/css/layui.css">
<link rel="stylesheet" type="text/css" href="static/css/materialdesignicons.min.css">
<link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="static/css/multitabs.min.css">
<link rel="stylesheet" type="text/css" href="static/css/animate.min.css">
<link rel="stylesheet" type="text/css" href="static/css/style.min.css">
<link rel="stylesheet" type="text/css" href="static/css/login.css">
</head>
  
<body class="center-vh" style="background-image: url(static/image/login-bg-3.jpg); background-size: cover;">
<div class="card card-shadowed p-5 w-420 mb-0 mr-2 ml-2 opacity" id="login">
  <div class="login-header text-center">
    <button type="button" type="button" onclick="location=location" class="fa fa-refresh" style="background:center;border:0;position:absolute;margin:-25px 145px 0px;width:max-content;font-size:13px;color:#33cabb;"></button>
  </div>
  <div class="text-center mb-3" style="font-weight: 1000;color:white;font-size:20px">Steam-Distiller</div>

  <div id="form-login" class="login-form">
    <div class="form-group has-feedback">
      <span class="mdi mdi-account" aria-hidden="true"></span>
      <input type="text" class="form-control opacity" v-model="user_info.user" autocomplete="off" placeholder="账号">
    </div>

    <div class="form-group has-feedback">
      <span class="mdi mdi-lock" aria-hidden="true"></span>
      <input type="password" class="form-control opacity" v-model="user_info.pass" autocomplete="off" placeholder="密码">
    </div>


    <div class="form-group">
        <button class="btn btn-block btn-purple" @click="register">发送给管理员审核</button>
      </div>
  </div>

      </div>
  </div>
</div>

<script src="static/js/jquery-3.1.1.min.js"></script>
<script src="static/js/md5.js"></script>
<script src="static/js/remember.js"></script>
<script src="static/js/bootstrap.min.js"></script>
<script src="layer/3.1.1/layer.js"></script>
<script src="static/js/vue.min.js"></script>
<script src="static/js/vue-resource.min.js"></script>
<script src="static/js/axios.min.js"></script>
<script src="static/js/bootstrap-notify.min.js"></script>
<script src="static/js/lightyear.js"></script>
<script src="static/js/Mouse.js"></script>
<script src="static/layui/layui.js"></script>
</body>
</html>
<script>
var vm = new Vue({
        el: "#login",
        data: {
            user_info: {},
        },
        methods: {
            register: function() {
                if (!this.user_info.user || !this.user_info.pass) {
                    lightyear.notify('账号密码不能为空', 'danger', 3000, 'mdi mdi-alert-outline', 'top', 'right');
                    return
                }
                vm.$http.post("/user/register", {
                    username: this.user_info.user,
                    password: md5(this.user_info.pass)
                }, {
                    emulateJSON: false
                }).then(function(r) {
                    if (r.data.code == 0) {
                        layer.msg("已提交管理员审核，请等待",{
                            time: 3000,
                            shade: 0.1,
                            end: function(){
                                window.location.href = "index.html"
                            }
                        });
                    } else {
                        lightyear.notify(r.data.msg, 'danger', 3000, 'mdi mdi-alert-outline', 'top', 'right');
                    }
                });
            },
        },
    });
</script>